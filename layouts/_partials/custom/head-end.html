<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css"
/>

<link
  rel="stylesheet"
  media="(prefers-color-scheme:dark)"
  href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/dark.css"
  onload="document.documentElement.classList.add('sl-theme-dark');"
/>

<script
  type="module"
  src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"
></script>

<script>
  var originalSetTheme = window.setTheme;
  var newSetTheme = function (theme) {
    originalSetTheme(theme);

    document.documentElement.classList.remove(
      "sl-theme-light",
      "sl-theme-dark"
    );

    if (theme !== "light" && theme !== "dark") {
      theme = window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light";
    }

    document.documentElement.classList.add(`sl-theme-${theme}`);
  };

  window.setTheme = newSetTheme;
  window.setTheme(localStorage.getItem("color-theme"));
</script>
